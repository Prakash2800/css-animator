var __decorate=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__param=this&&this.__param||function(t,e){return function(i,n){e(i,n,t)}};System.register("css-animator/contracts/animation_options",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts/element_props",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts/listener_ref",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts/timeout_ref",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("css-animator/builder/animation_builder",[],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[],execute:function(){!function(t){t[t.Animate=0]="Animate",t[t.Show=1]="Show",t[t.Hide=2]="Hide"}(i||(i={})),t("AnimationMode",i),n=function(){function AnimationBuilder(){this.animationOptions=Object.assign({},AnimationBuilder.defaultOptions),this.defaultOptions=Object.assign({},AnimationBuilder.defaultOptions),this.classes=[],this.activeClasses=new Map,this.listeners=new Map,this.timeouts=new Map,this.styles=new Map,this.log("AnimationBuilder created.")}return AnimationBuilder.prototype.hideElement=function(t){return this.animationOptions.useVisibility?void(t.style.visibility="hidden"):void t.setAttribute("hidden","")},AnimationBuilder.prototype.showElement=function(t){return this.animationOptions.useVisibility?void(t.style.visibility="visible"):void t.removeAttribute("hidden")},AnimationBuilder.prototype.show=function(t){return this.hideElement(t),this.animate(t,i.Show)},AnimationBuilder.prototype.hide=function(t){return this.animate(t,i.Hide)},AnimationBuilder.prototype.stop=function(t,e){return void 0===e&&(e=!0),this.removeTimeouts(t),this.removeListeners(t),e&&this.reset(t),Promise.resolve(t)},AnimationBuilder.prototype.animate=function(t,e){var n=this;return void 0===e&&(e=i.Animate),new Promise(function(o,r){n.removeTimeouts(t);var a=setTimeout(function(){n.reset(t,!0,!1,!0),n.registerAnimationListeners(t,e,o,r),n.styles.set(t,Object.assign({},t.style));var a=n.classes.slice(0);switch(e){case i.Show:a.push("animated-show");break;case i.Hide:a.push("animated-hide")}if(a.push("animated",n.animationOptions.type),n.activeClasses.set(t,a),n.animationOptions.pin){e===i.Show&&(t.style.visibility="hidden"),n.showElement(t);var s=n.getPosition(t);t.style.position="fixed",t.style.top=s.top+"px",t.style.left=s.left+"px",t.style.margin="0px"}n.nextFrame(function(){t.style.visibility="visible",n.showElement(t),n.applyProperties(t,e)})},n.animationOptions.delay);n.log("Timeout "+a+" registered for element",t),n.addTimeout(t,a,r)})},AnimationBuilder.prototype.reset=function(t,e,i,n){void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===n&&(n=!1),e&&(this.removeTimeouts(t,i),this.removeListeners(t,n)),this.removeStyles(t),this.removeClasses(t)},AnimationBuilder.prototype.dispose=function(){this.timeouts.forEach(function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];clearTimeout(n.timeout)}}),this.listeners.forEach(function(t,e){for(var i=0,n=t;i<n.length;i++){var o=n[i];e.removeEventListener(o.eventName,o.handler)}}),this.classes=[],this.styles=new Map,this.timeouts=new Map,this.listeners=new Map},AnimationBuilder.prototype.addAnimationClass=function(t){return this.classes.indexOf(t)===-1&&this.classes.push(t),this},AnimationBuilder.prototype.removeAnimationClass=function(t){var e=this.classes.indexOf(t);return e!==-1&&this.classes.splice(e,1),this},AnimationBuilder.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];AnimationBuilder.DEBUG&&console.log.apply(console,["css-animator:"].concat(t))},AnimationBuilder.prototype.nextFrame=function(t){AnimationBuilder.raf(function(){AnimationBuilder.raf(t)})},AnimationBuilder.prototype.getPosition=function(t){var e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY}},AnimationBuilder.prototype.registerAnimationListeners=function(t,e,n,o){var r,a=this,s=this.animationStartEvent(t),u=this.animationEndEvent(t);t.addEventListener(s,r=function(){return a.log("Animation start handler fired for element",t),t.removeEventListener(s,r),r}),this.log("Registered animation start listener for element",t);var l;t.addEventListener(u,l=function(){return a.log("Animation end handler fired for element",t),t.removeEventListener(u,l),a.removeListeners(t,!1),a.reset(t,!0,!1,!1),e===i.Hide&&a.hideElement(t),e===i.Show&&a.showElement(t),n(t),l}),this.log("Registered animation end listener for element",t),this.addListener(t,s,r),this.addListener(t,u,l,o)},AnimationBuilder.prototype.addTimeout=function(t,e,i){this.timeouts.has(t)||this.timeouts.set(t,[]),this.timeouts.get(t).push({timeout:e,reject:i})},AnimationBuilder.prototype.addListener=function(t,e,i,n){this.listeners.has(t)||this.listeners.set(t,[]);var o=Object.assign({},this.classes);this.listeners.get(t).push({eventName:e,handler:i,reject:n,classes:o})},AnimationBuilder.prototype.removeListeners=function(t,e){var i=this;void 0===e&&(e=!1),this.listeners.has(t)&&(this.listeners.get(t).forEach(function(n){t.removeEventListener(n.eventName,n.handler),i.log("Listener "+n.eventName+" removed for element",t),e&&i.animationOptions.reject&&n.reject&&n.reject("animation_aborted")}),this.listeners["delete"](t))},AnimationBuilder.prototype.removeTimeouts=function(t,e){var i=this;void 0===e&&(e=!1),this.timeouts.has(t)&&(this.timeouts.get(t).forEach(function(n){clearTimeout(n.timeout),i.log("Timeout "+n.timeout+" removed for element",t),e&&i.animationOptions.reject&&n.reject&&n.reject("animation_aborted")}),this.timeouts["delete"](t))},AnimationBuilder.prototype.animationEndEvent=function(t){var e=document.createElement("endAnimationElement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var n in i)if(void 0!==e.style[n])return i[n];return null},AnimationBuilder.prototype.animationStartEvent=function(t){var e=document.createElement("startAnimationElement"),i={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart"};for(var n in i)if(void 0!==e.style[n])return i[n];return null},AnimationBuilder.prototype.applyProperties=function(t,e){this.applyClasses(t,e),this.applyStyles(t,e)},AnimationBuilder.prototype.applyStyles=function(t,e){this.applyFillMode(t),this.applyTimingFunction(t),this.applyPlayState(t),this.applyDirection(t),this.applyDuration(t),this.applyIterationCount(t)},AnimationBuilder.prototype.removeStyles=function(t){if(this.styles.has(t)){var e=this.styles.get(t);t.removeAttribute("style");for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);this.styles["delete"](t)}},AnimationBuilder.prototype.applyClasses=function(t,e){var i=this.activeClasses.get(t)||[];(n=t.classList).add.apply(n,["animated"].concat(i));var n},AnimationBuilder.prototype.removeClasses=function(t){var e=this.activeClasses.get(t)||[];(i=t.classList).remove.apply(i,["animated","animated-show","animated-hide"].concat(e)),this.activeClasses["delete"](t);var i},AnimationBuilder.prototype.applyStyle=function(t,e,i){var n=document.createElement("checkStyle"),o={standard:this.camelCase(e),webkit:this.camelCase("-webkit-"+e),mozilla:this.camelCase("-moz-"+e),opera:this.camelCase("-o-"+e),explorer:this.camelCase("-ie-"+e)};for(var r in o)if(o.hasOwnProperty(r)&&void 0!==n.style[o[r]]){t.style[o[r]]=void 0===i||null===i?null:i;break}return this},AnimationBuilder.prototype.camelCase=function(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})},Object.defineProperty(AnimationBuilder.prototype,"defaults",{get:function(){return this.defaultOptions},set:function(t){this.defaultOptions=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDefaults=function(t){return this.defaults=t,this},Object.defineProperty(AnimationBuilder.prototype,"options",{get:function(){return this.animationOptions},set:function(t){this.animationOptions=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setOptions=function(t){return this.options=t,this},Object.defineProperty(AnimationBuilder.prototype,"reject",{get:function(){return this.animationOptions.reject},set:function(t){this.animationOptions.reject=t},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationBuilder.prototype,"pin",{get:function(){return this.animationOptions.pin},set:function(t){this.animationOptions.pin=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setPin=function(t){return this.pin=t,this},Object.defineProperty(AnimationBuilder.prototype,"useVisibility",{get:function(){return this.animationOptions.useVisibility},set:function(t){this.animationOptions.useVisibility=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setUseVisibility=function(t){return this.useVisibility=t,this},Object.defineProperty(AnimationBuilder.prototype,"type",{get:function(){return this.animationOptions.type},set:function(t){this.animationOptions.type=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setType=function(t){return this.type=t,this},AnimationBuilder.prototype.applyType=function(t){return this},Object.defineProperty(AnimationBuilder.prototype,"fillMode",{get:function(){return this.animationOptions.fillMode},set:function(t){this.animationOptions.fillMode=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setFillMode=function(t){return this.fillMode=t,this},AnimationBuilder.prototype.applyFillMode=function(t){return this.applyStyle(t,"animation-fill-mode",this.animationOptions.fillMode?this.animationOptions.fillMode:null),this},Object.defineProperty(AnimationBuilder.prototype,"timingFunction",{get:function(){return this.animationOptions.timingFunction},set:function(t){this.animationOptions.timingFunction=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setTimingFunction=function(t){return this.timingFunction=t,this},AnimationBuilder.prototype.applyTimingFunction=function(t){return this.applyStyle(t,"animation-timing-function",this.animationOptions.timingFunction),this},Object.defineProperty(AnimationBuilder.prototype,"playState",{get:function(){return this.animationOptions.playState},set:function(t){this.animationOptions.playState=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setPlayState=function(t){return this.playState=t,this},AnimationBuilder.prototype.applyPlayState=function(t){return this.applyStyle(t,"animation-play-state",this.animationOptions.playState),this},Object.defineProperty(AnimationBuilder.prototype,"direction",{get:function(){return this.animationOptions.direction},set:function(t){this.animationOptions.direction=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDirection=function(t){return this.direction=t,this},AnimationBuilder.prototype.applyDirection=function(t){return this.applyStyle(t,"animation-direction",this.animationOptions.direction),this},Object.defineProperty(AnimationBuilder.prototype,"duration",{get:function(){return this.animationOptions.duration},set:function(t){this.animationOptions.duration=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDuration=function(t){return this.duration=t,this},AnimationBuilder.prototype.applyDuration=function(t){return this.applyStyle(t,"animation-duration",this.animationOptions.duration+"ms"),this},Object.defineProperty(AnimationBuilder.prototype,"delay",{get:function(){return this.animationOptions.delay},set:function(t){this.animationOptions.delay=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDelay=function(t){return this.delay=t,this},AnimationBuilder.prototype.applyDelayAsStyle=function(t){return this.applyStyle(t,"animation-delay",this.animationOptions.delay),this},Object.defineProperty(AnimationBuilder.prototype,"iterationCount",{get:function(){return this.animationOptions.iterationCount},set:function(t){this.animationOptions.iterationCount=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setIterationCount=function(t){return this.iterationCount=t,this},AnimationBuilder.prototype.applyIterationCount=function(t){return this.applyStyle(t,"animation-iteration-count",this.animationOptions.iterationCount),this},AnimationBuilder}(),n.DEBUG=!1,n.defaultOptions={reject:!0,useVisibility:!1,pin:!0,type:"bounce",fillMode:"none",timingFunction:"ease",playState:"running",direction:"normal",duration:1e3,delay:0,iterationCount:1},n.raf=window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout,t("AnimationBuilder",n)}}}),System.register("css-animator/builder",["css-animator/builder/animation_builder"],function(t,e){"use strict";function exportStar_1(e){var i={};for(var n in e)"default"!==n&&(i[n]=e[n]);t(i)}e&&e.id;return{setters:[function(t){exportStar_1(t)}],execute:function(){}}}),System.register("css-animator/modules/animation.service",["@angular/core","css-animator/builder"],function(t,e){"use strict";var i,n,o;e&&e.id;return{setters:[function(t){i=t},function(t){n=t}],execute:function(){o=function(){function AnimationService(){}return AnimationService.prototype.builder=function(){return new n.AnimationBuilder},AnimationService}(),o=__decorate([i.Injectable()],o),t("AnimationService",o)}}}),System.register("css-animator/modules/animates.directive",["@angular/core","css-animator/modules/animation.service"],function(t,e){"use strict";var i,n,o;e&&e.id;return{setters:[function(t){i=t},function(t){n=t}],execute:function(){o=function(){function AnimatesDirective(t,e){this._elementRef=t,this._animationBuilder=e.builder()}return Object.defineProperty(AnimatesDirective.prototype,"animates",{set:function(t){this._defaultOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(AnimatesDirective.prototype,"animatesOnInit",{set:function(t){this._initOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(AnimatesDirective.prototype,"animatesInitMode",{set:function(t){"string"==typeof t&&(this._initMode=t.toLowerCase())},enumerable:!0,configurable:!0}),Object.defineProperty(AnimatesDirective.prototype,"animationBuilder",{get:function(){return this._animationBuilder},enumerable:!0,configurable:!0}),AnimatesDirective.prototype.ngOnInit=function(){if(this._initOptions){var t,e=this._animationBuilder.setOptions(this._initOptions);switch(this._initMode){case"show":t=e.show(this._elementRef.nativeElement);break;case"hide":t=e.hide(this._elementRef.nativeElement);break;default:t=e.animate(this._elementRef.nativeElement)}t.then(function(t){return t},function(t){})}},AnimatesDirective.prototype.start=function(t){return this.setOptions(t),this._animationBuilder.animate(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.hide=function(t){return this.setOptions(t),this._animationBuilder.setOptions(t).hide(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.show=function(t){return this.setOptions(t),this._animationBuilder.show(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.animate=function(){if(this._defaultOptions)return this._animationBuilder.setOptions(this._defaultOptions).animate(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.pause=function(){this._animationBuilder.setPlayState("paused").applyPlayState(this._elementRef.nativeElement)},AnimatesDirective.prototype.resume=function(){this._animationBuilder.setPlayState("running").applyPlayState(this._elementRef.nativeElement)},AnimatesDirective.prototype.toggle=function(){this._animationBuilder.setPlayState("running"===this._animationBuilder.playState?"paused":"running").applyPlayState(this._elementRef.nativeElement)},AnimatesDirective.prototype.stop=function(){this._animationBuilder.stop(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.setOptions=function(t){return t?void this._animationBuilder.setOptions(t):void this._animationBuilder.setOptions(this._defaultOptions)},AnimatesDirective}(),o=__decorate([i.Directive({selector:"[animates]",exportAs:"animates",inputs:["animates","animatesOnInit","animatesInitMode"]}),__param(0,i.Inject(i.ElementRef)),__param(1,i.Inject(n.AnimationService)),__metadata("design:paramtypes",[i.ElementRef,n.AnimationService])],o),t("AnimatesDirective",o)}}}),System.register("css-animator/modules",["css-animator/modules/animation.service","css-animator/modules/animates.directive"],function(t,e){"use strict";function exportStar_2(e){var i={};for(var n in e)"default"!==n&&(i[n]=e[n]);t(i)}e&&e.id;return{setters:[function(t){exportStar_2(t)},function(t){exportStar_2(t)}],execute:function(){}}}),System.register("css-animator/index",["css-animator/builder","css-animator/modules"],function(t,e){"use strict";function exportStar_3(e){var i={};for(var n in e)"default"!==n&&(i[n]=e[n]);t(i)}e&&e.id;return{setters:[function(t){exportStar_3(t)},function(t){exportStar_3(t)}],execute:function(){}}}),System.register("css-animator",["css-animator/index"],function(t,e){"use strict";function exportStar_4(e){var i={};for(var n in e)"default"!==n&&(i[n]=e[n]);t(i)}e&&e.id;return{setters:[function(t){exportStar_4(t)}],execute:function(){}}}),System.register("index",["css-animator/index"],function(t,e){"use strict";function exportStar_5(e){var i={};for(var n in e)"default"!==n&&(i[n]=e[n]);t(i)}e&&e.id;return{setters:[function(t){exportStar_5(t)}],execute:function(){}}});